<div *ngIf="flights$ | async as flights">
  <ng-container *ngFor="let flight of flights; let index = index">
    <div class="booking-journey__there" *ngIf="index === 0">
      <div class="booking-journey__header">
        <h3 class="header__title">
          <span class="header__title-icon">
            <img
              src="./assets/booking/plane-icon.png"
              alt="Plane"
              width="20"
              height="20"
            />
          </span>
          <span class="header__title-text"
            >{{ flight.form.name }} to {{ flight.to.name }}</span
          >
        </h3>
      </div>

      <app-journey-dates
        [currencyType]="currencyType"
        [flight]="flight"
        [dates]="datesThere"
        [selectedDateButtonThere]="selectedDateButtonThere"
        (onDateButtonClickThereEvent)="onDateButtonClickThere($event)"
        [isSelected]="isSelectedThere"
      >
      </app-journey-dates>

      <div
        class="no-flights no-flights-there"
        [ngClass]="{ hidden: areFlightsAvailableThere }"
      >
        <span class="no-flights_icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 48 48"
            height="100%"
            width="100%"
          >
            <path
              d="M17.0042948,22.8564421 C18.6299267,22.4434479 20.625239,22.1 22.3,22.1 L23.6651168,22.0024917 L23.7,21.9678454 L23.7,20.5 L21.7,11.6 C21.6,11.1 21.5,10.9 22.4,10.9 L23.8,10.9 C24.2,10.9 24.3,11.2 24.5,11.6 L27.7611914,17.9342371 L37.6894864,8.07337388 C34.0136502,4.91114318 29.2304695,3 24,3 C12.4,3 3,12.4 3,24 C3,29.179011 4.87372363,33.9194909 7.98040556,37.5806743 L19.5867206,26.053188 C18.7138731,25.9099908 17.8480228,25.715983 17.0650211,25.5024683 L14.6,29.2 C14.2,29.8 14.3,29.9 13.9,29.9 C13,29.9 13.1,29.8 13.2,29.2 L13.9,25 C13.9,24.752892 14.0144919,24.543948 14.1963226,24.4203211 C14.0053991,24.2975056 13.9,24.1879978 13.9,24.1 C13.9,24.0457758 13.9576292,23.9797905 14.0648522,23.9052328 C14.0230359,23.8140042 14,23.7108414 14,23.6 L13.3,19.4 C13.2,18.8 13.1,18.7 14,18.7 C14.4,18.7 14.3,18.8 14.7,19.4 L17.0042948,22.8564421 Z M23.509346,26.3863819 L10.0797588,39.7251823 C13.785085,43.0075136 18.6593792,45 24,45 C35.6,45 45,35.6 45,24 C45,18.7106072 43.0455547,13.8786377 39.8192794,10.1867069 L29.2018231,20.7323871 L29.7,21.7 L32.4,21.6 L32.8,21.6 C34.4,21.7 38.4,23 38.4,24.5 C38.4,26 34.3,27.2 32.8,27.2 L32.4,27.2 L29.7,27 L24.3,36.8 C24.1,37.2 24,37.5 23.6,37.5 L22.2,37.5 C21.3,37.5 21.4,37.3 21.5,36.8 L23.7,27.9 L23.7,26.4 L23.509346,26.3863819 Z M24,0 C37.3,0 48,10.7 48,24 C48,37.3 37.3,48 24,48 C10.7,48 0,37.3 0,24 C0,10.7 10.7,0 24,0 Z"
            ></path>
          </svg>
        </span>
        <span class="no-flights_text"
          >Sorry, there are no flights available on this day</span
        >
      </div>

      <app-journey-flights
        [flight]="flight"
        [isSelected]="isSelectedThere"
        (onSelectTripEvent)="onSelectTrip('there', $event)"
        [selectedDateButtonThere]="selectedDateButtonThere"
      >
      </app-journey-flights>

      <ng-container *ngFor="let otherFlight of flight.otherFlights | keyvalue">
        <app-journey-flights
          [flight]="otherFlight.value"
          [isSelected]="isSelectedThere"
          (onSelectTripEvent)="onSelectTrip('there', $event)"
          [selectedDateButtonThere]="selectedDateButtonThere"
        >
        </app-journey-flights>
      </ng-container>
    </div>

    <div class="booking-journey__back" *ngIf="index === 1">
      <div class="booking-journey__header booking-journey__header_return">
        <h3 class="header__title">
          <span class="header__title-icon title-icon_return">
            <img
              src="./assets/booking/plane-icon.png"
              alt="Plane"
              width="20"
              height="20"
            />
          </span>
          <span class="header__title-text"
            >{{ flight.form.name }} to {{ flight.to.name }}</span
          >
        </h3>
      </div>

      <app-journey-dates
        [currencyType]="currencyType"
        [flight]="flight"
        [dates]="datesBack"
        [selectedDateButtonBack]="selectedDateButtonBack"
        (onDateButtonClickBackEvent)="onDateButtonClickBack($event)"
        [isSelected]="isSelectedBack"
      >
      </app-journey-dates>

      <div
        class="no-flights no-flights-back"
        [ngClass]="{ hidden: areFlightsAvailableBack }"
      >
        <span class="no-flights_icon">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 48 48"
            height="100%"
            width="100%"
          >
            <path
              d="M17.0042948,22.8564421 C18.6299267,22.4434479 20.625239,22.1 22.3,22.1 L23.6651168,22.0024917 L23.7,21.9678454 L23.7,20.5 L21.7,11.6 C21.6,11.1 21.5,10.9 22.4,10.9 L23.8,10.9 C24.2,10.9 24.3,11.2 24.5,11.6 L27.7611914,17.9342371 L37.6894864,8.07337388 C34.0136502,4.91114318 29.2304695,3 24,3 C12.4,3 3,12.4 3,24 C3,29.179011 4.87372363,33.9194909 7.98040556,37.5806743 L19.5867206,26.053188 C18.7138731,25.9099908 17.8480228,25.715983 17.0650211,25.5024683 L14.6,29.2 C14.2,29.8 14.3,29.9 13.9,29.9 C13,29.9 13.1,29.8 13.2,29.2 L13.9,25 C13.9,24.752892 14.0144919,24.543948 14.1963226,24.4203211 C14.0053991,24.2975056 13.9,24.1879978 13.9,24.1 C13.9,24.0457758 13.9576292,23.9797905 14.0648522,23.9052328 C14.0230359,23.8140042 14,23.7108414 14,23.6 L13.3,19.4 C13.2,18.8 13.1,18.7 14,18.7 C14.4,18.7 14.3,18.8 14.7,19.4 L17.0042948,22.8564421 Z M23.509346,26.3863819 L10.0797588,39.7251823 C13.785085,43.0075136 18.6593792,45 24,45 C35.6,45 45,35.6 45,24 C45,18.7106072 43.0455547,13.8786377 39.8192794,10.1867069 L29.2018231,20.7323871 L29.7,21.7 L32.4,21.6 L32.8,21.6 C34.4,21.7 38.4,23 38.4,24.5 C38.4,26 34.3,27.2 32.8,27.2 L32.4,27.2 L29.7,27 L24.3,36.8 C24.1,37.2 24,37.5 23.6,37.5 L22.2,37.5 C21.3,37.5 21.4,37.3 21.5,36.8 L23.7,27.9 L23.7,26.4 L23.509346,26.3863819 Z M24,0 C37.3,0 48,10.7 48,24 C48,37.3 37.3,48 24,48 C10.7,48 0,37.3 0,24 C0,10.7 10.7,0 24,0 Z"
            ></path>
          </svg>
        </span>
        <span class="no-flights_text"
          >Sorry, there are no flights available on this day</span
        >
      </div>

      <app-journey-flights
        [flight]="flight"
        [isSelected]="isSelectedBack"
        (onSelectTripEvent)="onSelectTrip('back', $event)"
        [selectedDateButtonBack]="selectedDateButtonBack"
      >
      </app-journey-flights>

      <ng-container *ngFor="let otherFlight of flight.otherFlights | keyvalue">
        <app-journey-flights
          [flight]="otherFlight.value"
          [isSelected]="isSelectedBack"
          (onSelectTripEvent)="onSelectTrip('back', $event)"
          [selectedDateButtonBack]="selectedDateButtonBack"
        >
        </app-journey-flights>
      </ng-container>
    </div>
  </ng-container>
</div>
